import { z } from "zod";
import { router, protectedProcedure } from "../trpc";
import { prisma } from "@/lib/prisma"; // âœ… Using this imported instance
import { TRPCError } from "@trpc/server";
import { workflowTask } from "../../jobs/workflow";

// --- DEFAULT WORKFLOW DATA ---
const DEFAULT_WORKFLOW = {
  name: "âœ¨ Demo: Text to AI",
  nodes: [
    {
      "id": "node-2",
      "data": {
        "model": "gemini-2.5-flash",
        "output": "Elevate your audio experience to new heights with these premium Wireless Bluetooth Headphones. Designed for pure sonic bliss, their active noise cancellation silences the world around you, allowing for an incredibly immersive listening journey, free from distractions. Power through long commutes, intense workouts, or endless playlists with an impressive 30-hour battery life, providing uninterrupted sound for days on a single charge. When you're done, the sleek, foldable design ensures effortless portability, making them your ideal companion for travel and everyday adventures."
      },
      "type": "llmNode",
      "width": 380,
      "height": 347,
      "dragging": false,
      "position": {
        "x": 1232.130387438096,
        "y": -13.47085710781537
      },
      "selected": false,
      "positionAbsolute": {
        "x": 1232.130387438096,
        "y": -13.47085710781537
      }
    },
    {
      "id": "textNode-1768671840452",
      "data": {
        "label": "You are a professional marketing copywriter. Generate a compelling one-paragraph product description."
      },
      "type": "textNode",
      "width": 320,
      "height": 200,
      "dragging": false,
      "position": {
        "x": 285.164663089439,
        "y": -301.4675710523265
      },
      "selected": false,
      "positionAbsolute": {
        "x": 285.164663089439,
        "y": -301.4675710523265
      }
    },
    {
      "id": "textNode-1768671841229",
      "data": {
        "label": "Product: Wireless Bluetooth Headphones. Features: Noise cancellation, 30-hour battery, foldable design."
      },
      "type": "textNode",
      "width": 320,
      "height": 200,
      "dragging": false,
      "position": {
        "x": 229.727671819115,
        "y": -5.803617610598595
      },
      "selected": false,
      "positionAbsolute": {
        "x": 229.727671819115,
        "y": -5.803617610598595
      }
    },
    {
      "id": "videoNode-1768671867467",
      "data": {
        "label": "8005699-uhd_2160_3840_25fps.mp4",
        "videoUrl": "https://pub-e8fef8c0e03b44acb340577811800829.r2.dev/0ba4cad8511443669d51478f28e5a447/2ab25d7348e14ce488b3bd3428d268b2/e2168c68baf34e7898aa542346f0dc99.mp4"
      },
      "type": "videoNode",
      "width": 280,
      "height": 210,
      "dragging": false,
      "position": {
        "x": 429.6968189013552,
        "y": 669.7797047326958
      },
      "selected": false,
      "positionAbsolute": {
        "x": 429.6968189013552,
        "y": 669.7797047326958
      }
    },
    {
      "id": "imageNode-1768671873896",
      "data": {
        "label": "New imageNode",
        "imageUrl": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAICAgICAgICAgIDAgICAwQDAgIDBAUEBAQEBAUGBQUFBQUFBgYHBwgHBwYJCQoKCQkMDAwMDAwMDAwMDAwMDAz/2wBDAQMDAwUEBQkGBgkNCwkLDQ8ODg4ODw8MDAwMDA8PDAwMDAwMDwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wgARCAMQA9QDAREAAhEBAxEB/8QAHQABAAICAwEBAAAAAAAAAAAAAAUGAwQBAgcICf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB+9AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADGDpA5O1djsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADqY46nC8QOxyAAdTqc1ynJ3MtAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADoYo6qjscHUxmMxnQ6nBydzIZDuZDscHU5syGagAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMMYhL2OhgNQ0CKIc0TCcHQ5OTsdzZJMmCSN02TKcnQ72Z67AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwRhl7A1zQIQrBonBtkkbRlOTk7nBjOhrGmRxiM5OFlJQ2zIdDtZs12AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABjNaOZeDVIkqREHcnTfMp2OQcg4OTk6A5BjMZhIkijMWwsJvmY6GWzZoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAasYpeTWIcpZpEwSxmO52OTucHJydgAdTg4OoODqdDEaxXzXLYWY3zIcVt2dwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAdTSlRiIwqhXSwEkbRyZDk7mQ4MxwcHJycnB0OQdDkxmM6mM4MJrFfMZcyeNwGxZnoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYzRzeTUIIphuk6bJ3MhmMh2OxyZTk7Hc5OxwDg6nQ4MZ0Op0OpgMZiNc0yAJguBJHczWbdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADFGhLwaRViuliNwzmwZjIdzKZjOZbMp3Oxyc0AOBHU6mMxS4DAYToYjCYjAaxCGEuxLmYzWbtAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADFGhL0NAqJpE6bRtGYymc2DarOmSuQAAAAAAADrGE1pdQwGEwGsapHEQXInTYNizcoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYyPzehHFOOCYN02TZM5tm3ZmoAAAAAAAAAAAdY1zSl0zEahrEcQhaiwmybVm1QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6mhm4iOKgCYN42jZN+zbO9AAAAAAAAAAAAADgwxoS6JqmmaJBloLAbRuWZqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA041pdApp0J43zbJE3bO9AAAAAAAAAAAAAAAAa8R0ugaJHlZLsTpsm7Z3oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADXjTl0ipkYWQkySJKzLQAAAAAAAAAAAAAAAAA4NOIqWMIghC7kubdbtnIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABjNDN0SvFVLaS5M2b1cgAAAAAAAAAAAAAAAAAAGKIaWHK8a5cSVN2zcoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAdSJljYiSsFlJwn7M9AAAAAAAAAAAAAAAAAAAADgi5a5FYJAniQJSzdoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAdSJiBljCHN4upOanYAAAAAAAAAAAAAAAAAAAAAA1IrEtMJIkiVLFZtUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABoRXJa4RhnPSKmLOQAAAAAAAAAAAAAAAAAAAAAADDFElrZnJcsxO6mQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwkZmwBXSPPQatNgAAAAAAAAAAAAAAAAAAAAAAAA1zzXNiieLCTNm/QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEfGpLFEMdS/2blAAAAAAAAAAAAAAAAAAAAAAAAAVPNrRKEyb5v2ZqAAAAAAAAAAAAAAAAAAAAAAAAAAAAA140JcZpESSZa9QAAAAAAAAAAAAAAAAAAAAAAAAAaUU2XcJQ2DJZJ0AAAAAAAAAAAAAAAAAAAAAAAAAAAABES446mmaBarN6gAAAAAAAAAAAAAAAAAAAAAAAAAKrm6xJGY4JSzYoAAAAAAAAAAAAAAAAAAAAAAAAAAADCQubkMRoHctuoAAAAAAAAAAAAAAAAAAAAAAAAAAI6K1LvmycmWyYoAAAAAAAAAAAAAAAAAAAAAAAAAAACIjXl7GuR5YLJWgAAAAAAAAAAAAAAAAAAAAAAAAABwU/NyG6djAWLU7gAAAAAAAAAAAAAAAAAAAAAAAAAAArWbmBqGsXLU5AAAAAAAAAAAAAAAAAAAAAAAAAAAIWIeXfMpiJCyToAAAAAAAAAAAAAAAAAAAAAAAAAADTiEl2DqaJu1YrAAAAAAAAAAAAAAAAAAAAAAAAAAABhKhm75nOoLDqAAAAAAAAAAAAAAAAAAAAAAAAAAAQsakuYxGiWOzfoAAAAAAAAAAAAAAAAAAAAAAAAAAACq5vBtnBqFp1O4AAAAAAAAAAAAAAAAAAAAAAAAAAKvm9zIa5qly1OQAAAAAAAAAAAAAAAAAAAAAAAAAAACEiKl3Dk1icskKAAAAAAAAAAAAAAAAAAAAAAAAAA6FRzdo7GqbBZ9QAAAAAAAAAAAAAAAAAAAAAAAAAAAAacVaXcMhhN2yeoAAAAAAAAAAAAAAAAAAAAAAAAADQivS7BwahNWTVAAAAAAAAAAAAAAAAAAAAAAAAAAAADgpebnMxjO5adQAAAAAAAAAAAAAAAAAAAAAAAAACGiJlzHQ1C02b1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAVXN1zZOhhLlqAAAAAAAAAAAAAAAAAAAAAAAAAAV3N0zIYzULtqdwAAAAAAAAAAAAAAAAAAAAAAAAAAAACvRGS7Jwa5bdTOAAAAAAAAAAAAAAAAAAAAAAAAACrZuIyGE6Fz1AAAAAAAAAAAAAAAAAAAAAAAAAAAAABERAS7ZwYSx2b9AAAAAAAAAAAAAAAAAAAAAAAAACnZvcyGAzFr1AAAAAAAAAAAAAAAAAAAAAAAAAAAAABoRV5ds5MBN2S9AAAAAAAAAAAAAAAAAAAAAAAAACi5u2ZTXN0suoAAAAAAAAAAAAAAAAAAAAAAAAAAAAANcqGbtHY1SWsn6AAAAAAAAAAAAAAAAAAAAAAAAA1z5cj3OX5XLBZ7Oes0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAOh895fN1fSkvrdniR9LUAAAAAAAAAAAAAAAAAAAAAAAABiPMSuZvx5Z9GHrJ6pQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHgcfG59NS+l2WWr0AAAAAAAAAAAAAAAAAAAAAAAAADUPJo+KT76PQKAAGAxHJlMpyAAAAAAAAAAAAAAAAAAAAdDCdDsbB2AAB+fke4y+h2en0AAAAAAAAAAAAAAAAAAAAAAAAABqHk0fEx9+HoNADqQxpmUync2TeO4AAAAAAAAAAAAAAAAAABrGiYjoYjgmjbAAPz8j26X0ez06gAAAAAAAAAAAAAAAAAAAAAAAAAMJ4/HxSfeh6RQAr5FncymwZTsZyTO4AAAAAAAAAAAAAAAAABpGmYjoYTXMZyWo2AAfnpHvMvolnp1AAAAAAAAAAAAAAAAAAAAAAAAAAD57zfkWz7APZbCyQPOTIbJtGwbBmMhmJYAAAAAAAAAAAAAAAAAGAiTqdDAaxrGsapYi1kaYkrh8lS3uX2Wz1CgAAAAAAAAAAAAAAAAAAAAAAAAABRTyNI+vRTfiMq3RSDdJJd42jaNgzGImjaAAAAAAAAAAAAAAAABwQhiBrmsahqkakeS5lIsgar567L2i71sgAAAAAAAAAAAAAAAAAAAAAAAAAAg0rFUs0iYIwnipRIkysqbxtG4bBwZicOwAAAAAAAAAAAAAAABpEGbZrmmaxpkakQQRPVgOxBmctUCePQVAAAAAAAAAAAAAAAAAAAAAAAAAAxFHsjyMIA1zXNgiTrFjJ0k12zcNwzmmT5vgAAAAAAAAAAAAAAA6ECaxmNQ0zVI9Icr5WauZGG6cksdikHqsenqAAAAAAAAAAAAAAAAAAAAAAAAABqHm9mA7kIVY2zVLIeaFmizkuu+b5um4YDdJwyAAAAAAAAAAAAAAAEcQRtmsaRpGgRqQBVCTqYIskiNPQTkFni4qAAAAAAAAAAAAAAAAAAAAAAAAABqHlNmImyZKuaBWC2FIISLUTJKkiu+bxtmAmiSAAAAAAAAAAAAAABhIU1Tk0TRI4jkiCuFVr3YpRtFkJszECRpdYuygAAAAAAAAAAAAAAAAAAAAAAAAAdDySyPLUXEyFbKIaJcz51LTFhJhZQkSSN4G2TRnAAAAAAAAAAAAABwRhDGU1DRIwiyKSDK2T9eoFJLoXMkiCKSRZ6TFpUAAAAAAAAAAAAAAAAAAAAAAAAAAeaJVatcXupEiikFDLzHk1VwsEWElSYWYN03DETBLHIAAAAAAAAAAAABrEGa51NMiyGItIIgSsV9KRTa3z0Is53KvFCrSPXpZUAAAAAAAAAAAAAAAAAAAAAAAAAAFUTyyrFHoRP24Uq0ec1oFvj5lqzk/E8TSzJKG8cGcsBtgAAAAAAAAAAAA6kMQhtGmR5DEOkGQRWqsx7FFFq+xfCVNWqVFDqQPYpcgAAAAAAAAAAAAAAAAAAAAAAAAAANQ8Vs6nocW6tgiooZQKvMeN1WSzxOE8TKy5Jm4apMk8dgAAAAAAAAAAADRK6YwR5FEKkKQRX6qx9PRUKkD0iLRWUhooBUa9Hi/KAAAAAAAAAAAAAAAAAAAAAAAAAAAPMk8/q6RfCcrEVaPNajS1x8y1ZyxROk4TRLLIg7FkJEAAAAAAAAAAAHQrxCm8RxoEIQSQpAVWSyHs0UmvQIvxK1qlRjz2sJ7XLKgAAAAAAAAAAAAAAAAAAAAAAAAAAAgjxGzcPQIt9bpExQjz2rhHkFVoshORNFiJlZU3zRJssRkAAAAAAAAAAAIwrRwCMIdIMgSDICqufTMVSpY9Ki1VkIAosUmr0esy8gAAAAAAAAAAAAAAAAAAAAAAAAAAA6Hj1lJLiXmLJXQrEea1CFtj5nq0E6TUTxPEsssZjsWQkwAAAAAAAAAAYiukObBGkSkGQJCEHVdLSerlUPRIvlShHlMii1pntstlAAAAAAAAAAAAAAAAAAAAAAAAAAAABVU8RrZLtF0qSIspJ50Wc8vKiWEmomieLAs2SZrkwWIzAAAAAAAAAAESVw5NUiUgSBK+RNQpWT6WKiTx6PFkrsVkpBUi7Hs8uQAAAAAAAAAAAAAAAAAAAAAAAAAAAAGE8VspBai5lgOxDx5zVbLifNRYCZJmJ0sZOLOGY7FkJgAAAAAAAAAGArZEGUiSGStkEQtQhAF2PRiunpMW42qjypFMMB7hFtUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVBPC6yFyLYSJhiqV5qThQCiE8TZOxNFmJpZcEsWQ2AAAAAAAAACFK2cGmQaQBAEBUMQxAH0wUotJ6LEpWEgSmlWL4e2y5gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYTw+zz0sxcifNkjzzsqJdz5qJ0mSZJyJ8n1miWOxYiaOQAAAAAAADWK2RRiINIgrRBkLUIQB6CXUiD00s8dqjIqlU0HvUXBQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUE+f6xFyLOS52K4eYEkVU82LATJNE9FjJhZw3CSLKbQAAAAAAAOCDK8YyJIJK8QhAVCkQQx9JlFLmehxt1okCU8rR6We4S5gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYTw+zy4sZbCwG+YDz4pBfD5wJQmCbLDEuWAnCcXYLATZyAAAAAAAahWyNI8gUhCBIIgqhivHqRPGmeoE+uJIYrJUTZPoWLaoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAqh872R5bCyk2bBBHlxsEYeSlkJomifiZLISyzJIlkNoAAAAAAHBBkAaxXyIStkHUEQpCmgfRhQC9l/MpGFeKsQB6ye3S5QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYzxOzx0nCzFjJQ6lDKCX0+fDYJwmiZiwk8T5MrIlhJo5AAAAAANUrhEkORCV4r1VsjCGK2exGc6nqRMmoQRWyrksfRsWdQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABXE+bqgizFkJ43SIPLToZDxUshNEuTpYYnSfJ1ZgsJsgAAAAA4IcrxGFfSBK6V2ociCEOp74UM9BL0ckQVwrRDntZ7RL3AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB1PHLPCSULIWUlwtJTzsvB4adCaJgmydiwk2WBZ0shLHIAAAABrFfK+V9IcrhXagiHIorZ7gaRsHqBLGkV8rRWyzH0rE8oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAhT5psppZCylgN4ijzM0SUPCyzEoS5PFhicLAtoLITRsAAAAA4IsgSsJXivleK3UQRZDG0ezlNPQy5HJDlaK0aJ9AnrsvIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAODyqz5yNgspZCYBUTz4tB5MRpNEwSpYSwRYCxFyWcJM5AAAANciCqFYSvFeqskGRpElcPdSHJM9HJM0SBKyVwvx9MSyoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAI4+aLPNCwFlJ42iMKGQ5MniBYCXJUnCwxPlgLgtrJkzgAAAEWQJTCtpAFbquEURhBkyekkCX0sxkIorhWjg+mD06UAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAedp8u1rFjLASZiK+UgkymlbJ0lSVJ8sMTxaluJYyVAAABhK+VUqKVwr9VohiMIogz2ggibLoSJrkIVwgz1s+k5dwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGufOdniZMFgJkzGkVEgSdPIyUJglScJwsEWgt62gsx3AAAI0qhU0qhW6gSvEQRpAFxJw1C7EyZCPIErxLH1XF4UAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVNPk6q0TpNm4dSKKedzRKaTxLEwTBPFni6LcC2GyAAAQBUilJVCu1AEORZDmielkOT5ZjaMRFkERx78fQUuQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHU8Ms+bzOTBJGQ0yAIMlSkGcmiVJUmCyRdy9LdTcAAAKwUpKCVSoEhyNIcgS5g5LQSZkNMiSHLufWcWBQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFHyfZ5kSZJm4YiMK+ckiUYsRIkoS5YovJ6Ct+M4AABWzz4oCU+ochyOIc7lkIclibN0xkcRRmPqU9el5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPOE+SqiCTN47mkRZoFkNQiCeJYli0Rdj0ZbeAAADSPNihpUqr5EEYV89AKoYSVJEymqR5ontB9SS7YAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMZ86WfOpsG6ZTCaJ0JAv5BEuTETBZC9reTKAAAAQZ52VNIAiiuVNkAVEGybgNYjS2n2DFtUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARJ8hWeYG8dwUotZMFyPWS8yxhKFhJs7AAAAAGmVwgjESKeH1QCBKKWo2jsahsH1aezygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACkp8d1UjuTBoFSPSi1Hsp7fKAAAAAAAAAIg+WrKgUwgyYOpwZD6DPpiXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeWJ8qVVTGWA1SXPRz6Di6qAAAAAAAAAOD53s81PPTRNUEieyn1PLIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4PNE+dqqZtk2Ww9ZPVJewAAAAAAAAABBHiVnnZVjSJE9XPoqWSAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAK+eaWQZPl4i3L2AAAAAAAAAAAI48/sqJ1L1HoC5wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAdDscgAAAAAAAAAAAAHU5OQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//xAAjEQACAwACAgICAwAAAAAAAAABEQBQYCAwMUBBcBCgIZCw/9oACAEDAQE/EP0jlFFs1FF2KLUqL1FFolF7Szyi95ZtUSy6pVlQKhbwjPuOOPm4444+8jNOP03H2kYxdTj9p9ZGTcfvOPIjodG8eOh0zybqXzOKdY94DhhxJsQcSd2bQYY2o4m8HE2w4m/NuOJuhxNwN2OJuBxN8bgcTdC8F+OJuzgDbDicAbYcTeC6GBF0OBvRxNyb0cTcnBG2EJUBhN847kfh4wPxDceUOAM+LnyhwBnxc+UOAM+IbcQ/yYTfuGDxDcP69ce7H9cI/wAJ0feo+yT9TDNjZHpGzPQNot4veX5X6fn/xAAhEQEAAgICAgMBAQAAAAAAAAABABFQYCAwMUAQQXCgIf/aAAgBAgEBPxD+I65cuXL3G5cuX1XLly9ouX6dy5exXL6a9C5evLL94dbvBDq64UdVXB1xHUlxQ6esvuqV8KlSuVSpUqV3jpq9tSpXpVKldg6ZfVUr2aldY6UvTUr3qldI6QvQErBV0mjLzqBhk5mmBiUich0ReQYxONwdCXiGPTkOgLxDIpxM+8TMGeXiGUHEzjxDKpxHOPEMsnEzTxDLvE3cf8zzvQ6GM6M05x88DQBuxzZ0UZsZx/AAyr54GhDxlXQT43sc0IwlQz1SvioZZhCBnqhPuGX+oeIaAQ8wy/1DxDQCHmGX+oeIaAQ8wy/iEBlSs5UqBPDDL1ADQGJvJH4qVvblj9Ad7d7cufgLnXMmhOZNBc2aA5sz7nTPOdM658zjnzfDNOgm+GYdDMu6KZZ0Uyro5lHenSTJO9OlmPdNMc6aY108d8vFOonU+qdTqY9L6prw9D6x0OrDyX1zles3Lly4vtX8XL/j8//EACwQAQEAAgICAQMDBAMBAQEAAAERACExQVFhcYGRoVBgsUDB0fAQMOEg8aD/2gAIAQEAAT8h/wD4jOOcSYm+H/NiRZvY/hcTZf4b+P8Agk4Gf9DQxPk/n/NnXBzQ/wAfu8cSHQoP5x9qTgPvB+mIH3RfcA/nGwvtCP5M3u65GX2GYOu/yhcOED4wnLm/8cfIOcufkMKob7T/ACGAYL5T+NwaVFyIp9RT8YFx98sH5r8Y3IpCrfgi/uc0bNh5Z4OX6Y67p8H5Db9wx5cH1/vv8sRQK5e1+XnLkh4wXeD6Yfr98H0++C6ffHxM9bBOn3xHT75wAxXXFdME7wTEMQbzcBtN4HDf3PthrAnf8yUfsYhifAY/l+X7icWNjsny6D6uPDF93Dt/2DHkF5Pa+V245DdzLNJlbXK+h7XBFIOaD+cXO0R/Kg79YQXqKuStPkTFRD0I3GenCncJAduyC0pfbIsbTUawnZs8MZjqTLKa3r04rvGqrC9zVRhBqBZ1h3ceL3x5khrnmZF9WgCobg0cvBvFbd9IKJKSVlznF9T/AJybL/eStfeSIPvkKViPeIcY3DZf0b+9r7ZpNfdU+vI+lzpHFVj4ff7dbCnz1/Lg/n1mzuvME+48/HrDAAOA4yhlSgw91p7wv25QP5xZbKMlheL74/QTiaou3t556ygupO6k7Rx5esCr7JlVEDt9d3CUvNnYx4KiNNuUfgKBGEAEeR3sfGcTGnUyBicxh4d4nIlVeQdkYR42fXOkQGoDgbeF75uTGqpYCQFv+c1rWVQrxNF2eMSUHWAE1K1rCUNdIrXRsp1i/WKnWhJhg8C+Rli9DGvOs1jj+ElDh0HcOsCmlTTwSMtEvFxMcKLpR2C9pjgBSv8AkRw7Qj2OEkO87C4ZB3h9sddPk9OayT1bP9evtgk68Jf2yaieHtPAd41y+a3+Dj4Pu4AADo1hnOEqkwzQDtcKZL1oqLINdqA7zeV0FDrXUeUYNg5tC/rUqmoHtrjePjJ2qdCUNaaausSXFl1pR7zSc8dZO9itmsZPlg4GUCCO2OzQnpgAXJrCYE0+TyaygBmlUKb6A+75ZuEkkCWATT4O+I9YyIZzDbdwlm/eMhS2GKjwXrv+GaCAQ1ISPz458YkkBieWx4rzyOAJVbFSnlqs4NOFcCEm0Y2SH2YOhAuhnSGI048YFdAbA7FVLHlx7ohbdSbIahx1hKkKtWgEu3o4ACSQBBQpfucgpcAwiIE40S97x0C6dRN0QO+b1iIUQMBFFUMdTwpvDjAZTYnInTghrXDyVgTFJqc8EeHDz3gCC4Q8vq/y+/7Xupnab+Ly/wC+smmeUF9ej0YBMPYGNkA5XFFvVKjrwnvNbCeSmgA9vq6zRsuYEhEECdhnNxsTBdyvtrxY68OOENA8QwGoH6nNMAYIkgwi8cCb3rk1ckW/BpRKlmid+mIVIctQAg0Lyj48sbPEUGig5Ld65mKgSdpSN8B+z0cXUQlGhk8ls93BKKOQPRIVp0+F8ZtCYqKiV4ur9WLQPLMJHPvNecNpDurh0ELTzLhdmy0aBo+i/wCqiBkAgoHdU6mFtSGISsDbf4fWk2hAaCEBSLPw5dmQIpeTsAvfBzioqt1PZtCvTzgnALoToo2Izx3hLXjcLkE8MuuHNxQPXRSsnJDcwEgTv8KiB0tGvecZCOkRw4b1t9sDvImFsDexbfs1neKoppYN2dzAMvFNj2I7H5wo1uGaecZR2PWan207D36+OPjN1k5dJ4Tr9phw3lYkipp/2g9YawScYS7mBg2wr92JDQfJQDO1TTDZQYZ8hutonsN3rcAuQVvCYZIKiR5tAgca17MUFA6BN5WlLLvmGmCoLAjg7RCPIHB3lFEpbY0CmOLdcaZC6KjdGCFXbu+DrAICInWm0t/T8lliLO8msIpL3xxyx1hAIR7joHvR6TKwUhd4Jt6Canjbcw7D2B2l25k5d98mDK4iqH4KT+HZq4vReESzgoPofVwZuqQOu3RRz1vlp7cWZaDY5B0cC3T78GDIEUeJOVPDZ3gpCCKByOgP9HTIgGCBnuSaI69PkxwLoClXctLzPZhJEAdTBvKnI9PWSmV+iLkF7gvHWBlOiec1H5Ju+q4bbnYQ5kwnCnreKpTYAAnATbidYGhDtQa5NojgwUKmQxmo5Hi3ePk7QoWmkEYWTBA+kxuPRMpH24gR46xQ647pnzrGZJaWShQx6eFusNaQiIn0wdA3CDeKBwaD/D5MJh6ePBz/AOP2jVm3j5XrONAcPH+T7wDiBYmHORFAB5XLJCXMzT09a6b0jiwotQevJQr0lDlM5M0sriFmmW+NZOAqrdUcK0HS6HgGKm1A8+eh8FOqZWKgKz7Qg1l1p5hwkRaSSHgl6Lq973il0BuTRF0Ol+qm8BNj0lNwGfN484tb2hFopItTufFGYiTelil9i/U19NZAoKBkNNAHDwC/2KQWIBFNQNKfcfwZMINgQjDaV+f8pBZqEKezh/f/AJuIQbW9PF3/AD98GG9KfbXbFW93/MDRgNWeiUNT/Ukhqpo2kBONPsGJRS0aO/asUCrHZANCtJ+D8q2YasI0G4Ivrwn5wByKQGqdAX4fn0UoipVCHS/wL83OSK62A2Q93b35MkAUuHNztlOuy44CVPknMdnfcuIQU2MRB7ZGzzMdHI1OoC05SPfWJERpUM2qeEgnnNNVkCLVNdis/PjOfIB7OCOASeejIynBZxe8Y6et943VRsKEjfbCnNcaBxxUHh3k6TAQ7YI55wh75HHR6jd+v8v2fTvgHL/gxN+Ag6A6MMYy7eM5+DHScwdHb1igPklJTXag54et4BRGRUVCAgHwOKdZMFaVV3RBwcDLhEgw0S1ewF8FncOMwIGhE5Cck5Jrpm5Bir1ILpc2/LrKm1UZSd8IHfHffbOXqtXu6nCPo38prOZBDQ3E4HAvBx6xrSBZw9lE0N8TJIYFIU98B4wgDDXzp7YSOqAI74feKLGtwJAg9fGeh9v/AJh4Mo2L8YuImPOBTy55ydHUiO7ecYpAMBNa8f7rGtiDqj4CJ/fJNBWFVnPNSem+nGytEQEFG5Yn1ye82YHAoHXAJm62cPjNjPJKvpGJdQyyOIsR5C0tvjzcO4fuNw03K4E5+mWA8XQSHgCr0e8VFNokqBfSglPgMErsjRSRVr1ONHGOSUrAbmeSHPDibINDhEjlDHdx4S8W/B9fs2nfyD38GK19h8ejAHOEoO8Ijr5AOX4PH8c46iuw7ACEmh8YJgMpwNjlQOiCHpwdkJj7Z4NPf+GdKiomuFMBDK3wuG0JSd9rl2RyDXeBMWIcPcte7lfqGIE2EBug1sTepX3cICmKN5WtWfjElo0RWXSVcLDgQfXX8YBwB/Q+unnCYLu5wmhI9ObxmwnM+9Nb5GdkxQHpMm+iWjPVT0YNPdY8OTsyxCIp6HFaI9hVeH6kDh24InaVWHiJs9BpzeEIYALttF13jRx4E7Dgw+g5ID44BRhLvHjZwTeI1rFaQAyC2LLfQYExdTDRG3ADGY9XP+D6/Zazctd64lfa8B4PWAHeAENsMKqOwVC7aDwFcEvucvh5KU4oGg84NEBKMeFCngNrpMbZ0AIN0K17Xa8IxQFTakNNM2dkM1vFqE6MA211E1QfVnYFEaKgg344DKlDoJyPN8895QJAFes+Nf1BUJ3R95DXIJ9TzcRiV06Q0Q88/wCMIiEl03SIbN9gx8XFAOENVteLN44eTA7QTVS2Bo0TV4ejNcOgh1dBZPa+XEg9rhMjOT9JzcfIwYNZFO0orI5uFEP8KOQdiOkcMI3EAxiNeDdev2ShaBiD4egPGEHACcsJ5dHFSvJBioqo8YjJdAO7Vu3QKvJhujFgrPCVEwgs7YECERRtPTaJK8lHKIJwhtVovI40ey5rQoqTU5AkDuAcd4WgmQOxt17ximcvLif1qDpLh5NjR1o1xiylhLG1u23XnBCcqtXTI1oexEfnCgYBgflFaaeRNzWOdCNUMJyx5kciMx9qYo3URani86MbFwfdlFUor8kKHX+4E0idI6TCJHnLZMJpy8/sdQFdBy5qvif3wQcNt7yiFgLTZfUTV5cMkTKT0pyO1ea7OsVKrJHMOAzV1o24GQVLB2IlaoGuSMFiob5dUnPQngPWJwwPLZrv1M1R8vz1+gweS/OFwPSdc7w+m9Dqmv5YBTRrrE28BzIaeEmOAlFwEuQLX4+Bm2ikghBBxVZdKreArCZqLAVZpXmb84Qxz1ESiOCBzjR3g7OHP+f2NqU13/thlxmXHmvJTfxwLDlZxkSMEbIKnwjUg4bdp0CAaHJfToPKM4pB0ohsEaTnVT5yyVJ6N6fzeMHhqBXr9FBh5BwuNCB+pMb+MUaIRlZxlfGfWLdaSTk+2hgsjKRKyRHQF1sfbJHXrqZbdO41BphBfg4aG8YQOzDId/sQZD4jx7wy7w1VwD7C2AFVyBwRmBljtAvUiOAQJpFpIKdrHfwPeOMbJpRmvNeXyvvJMi6Q+R7PpgEEEB1+kJABEJ8t+uGhYeHcDidYJGm08ECza2TTOuseFBScqB0FdJ30UwqYBZVDXQpggOAZvBZX/RvBEEaPD+wnqQddr4M7WPXj1kbvNq/Azk8S8TaqC2ddeci0EZAQqLoCjoB7YN3ENABUs42LgbREZ90n1/SwUKcjhjuKwKbF4xKQUFSWG4eD/wA8LptRUhK2QctHDGwUnoPGFCuGGATaef8Ab/H7BcvOTHVVg+hl1xEcCwrl9H+c0ZEfCuCqqaNJ3LitQHBLqEJ63kUBVZ2vL9f06tiQnS7H3ZkaQdS0baZGRO/ziVBq6qwYBNEnXxjQgTnOBxRG2Ars/J/7+wK0Xj9vnBMvHGAo5KWrm2BwSLBZN8o9cYcw7w6hxzo3gAAaDQfqCw9L8k7xZRPJaFWley8YXDy0+TGiOIVcXa2cecAHpof3+v69qj0nx3j1ir3zcGUo1cSTHRtdp9B/UwCm06UBHrAgunbnSbwIEdYwoyzigeWvh+u8bdBniRoejBblazCbquQH5Li8NO7OAb4IfqgMNenVdH77+uG+u8nEyIx6M216Pp1+ual4Xx3hriuGjmsw926DSHH1P4v6rysp5WfyH5mUWatzg1hgZAy5MWvi/rker+O5/OcMkZIcnPx25rYn5QeH0P1YwQ4jrkPo5MMsGGn/AAUK/wBv4/H60dSA+o0fbnNyv/EjL0zaJqfxPyw/V94n+M/tv6YuHLBvFrOGVWhw+Gz+5+tXhoz9uh9C/fBAxciOWWavl59aD7tft+roBABE2I4ix2m9vavxznHvFQxxtoj+EaZwtkHMpx9P1hZt0HLjoWO30ND7Zwxac5c4c2XortZ4wzYwDoNH6wgo3N3NvoEfvkEmUP8Aiyy6OT9Sn5H9YiyBy8ur+K5AZwxwze5GX8lj+B+/6yD0ql6AbX0QxKjpGJlwwdZuZVEGW8u/yJ+sIKsBDpv+BzQYOsmOcmU4R3/c8D9anwRy3fP+T/iWseseaF4yqZ2r1+BT9X5N056ip9RcXGcM5cQ2CHoqXDNCC4AIH60coVk7Qfgj984cqGO4astVVp9MfgH6sBVEPQV/jEo1Sp7XHmnNrl68j3t0/u/W/NS1XfT8yZGZpN4tOc2HLrdT6K/JH6tNlCPuin2OCGLWQMouTU8YPRv5/WyCIlHSOKm8m80Lmkxf+Fg/UlDH4fqyHRY+kDJ0YOsenHtxXAEtOxIfsn64zIA49lP3WcHvB1m2WWqAfIf7fq0soOnhR/EzQMOMenGxm3ozuJx8CH8frhAvpSIf5cccV/4TRzmQqe4v5/VTSUX1xP5/4nGPTnFB7YC/h+uwam7wCfuzORnH/idYJhqvSbQ+yfqpnamvVzFc6/4skKfSIfy/rrRlfsEP4x7M4H/EsKnVp4GH8P6q1qS2n3vOmPGd8FWXk+39d5KVYHu5i4zjh1nJxhMgID7n+36oxDEl+f8AswsQnClNAL0YHOTHTc8NMbGQItHZF5wyYG0O4lCyjgKroDnMJDgc/rqDyk9KE3OslKpQILJY3hjGdNiI+gvOT5RIN+mSbqFUNYWj7M1cNlUUQAeD9UK9UAS4gRGPJhaEf1NlcNHAxpZiJc9co3fOU/3U7hNjbiYnpf1LDWIB83NjgSCWSoEJlXcP12QtBJvKiDZLqjeJa3MGbot0Rw4nli90l1IfbBuhPCQpUWR05whvWRowDpX01P1WmiC9JJwUW1flGM6LcfJ5E4d+5JCeq/8A3fN4OtuOd5qmtG3lJinhN/jNDv8ALuYIKNHhP0qhyHTbgjFln2uJKR3PpmzLK3vjS/fBVGOQ5P8A7hA1yyMX1jGvf8bE6Yde/wBWRfwg7qI/OO/+TVm7/wB74gaXvUEX1r/5cuCrjM3JqVox++Mk0WG+BX2cFKrA076F51vh+cOSLROTR55DXvCWoDVS33tzYDoYnTDj8Z2QNeB/SAK3Gk9/GMkgLVnHz85uUnkh73xiIvkYkn1dvsw+TNjYknJr6f5y74T8y1fBgdSFeidT/wCjBnB5Yz9cVf0/hjdwH5/VgxYIVcNRi7xgfFxfHn+VlO2RyEyOTQfb3/8APbOBHgLJ6mbqmkDapu0R3yYc1EcVAPFrl4HfLm9a+cR1q2gdDWLey9KIG1UNdcfXI1RNigPrQ48eMAFItKfbk4tpanyOx16xM9cjw9j+jdGdJ/lv646bSIHAfmYbSKf9IvnJqOyyxeFgO1bkCXQqLBwWhV8mJYxFSjd4AgOt1HNAE9I9nw9+seGnoR4QbPP+zGVOhGwf7f8A5axLoQpQoKnWPo8fxDETlGm6hv4/VwdtOqv96AzhEcp4ZCepQkWtdGOkJCGE3QQfIBC7Tq3zXNUbvn+Mm79pp8nOOK0R4UT84rGwoW8RbUl2bQfeOFHQLceAAhudGEg4lV6wNj6HgwRoN1TecZBy/wDrlZC7KjlDiutP+MKGhVS+aabGmy5pwAtNHqVw0iI3p8+gP4ymhSO7vi6v6KCJwJ9vOVNNvb64dUB5gBne3+7IRicjZetC8rhBNN2Aj2J0Au6/HOPo0AChoNQK9H/t0JVka0LBo0mFWkSTnwhTT794FRcsK4aGICrUQZsbUVuyKNeumAIA2pgYrB5G0++Jkg+cXkVnlzM2jmF6uBA4strgqA3Yi1m4L7xHVhQIjsc56YIQW2Bo5h7/AFdyxYCHgOkeTdmRwMgZFqPFaVBxSexrW88HALhCXc6wYPunTIzdRITl53j9VLFdTTnR8nUMaJgShJAQQ6+H3yzurTtCvRx9nYc4WH0lqN4KU40cetliiG5G8QUx1zrjmucaAJBrNaMeAfHnIBVuip41TPq/wZRzNWAu/RZN3rYeaepeMk0Hp8n+v6GiECriOsBicBxnAjiGH1GP9sUC1PKfQGvp+ORpsEbUCVukzr7sCgU1SqcBEd9c+TJiAw3jjKNzWvskKFixxTaAGlbn23gBeZRKdAvBpGePGFaLh4dQCR2WnnAUogvAOdcPt83LpdX5gMYdnbvAu1uhKuwHCCczFZhRrDqLRNTvg4MA0cKAy86BVob885Iu6xDS6GxK03sV2XUywAaG+k1pEP1a/WnnnHpS1vAD2d4bLDBPdpnPtXJR2mWajTdFb7tqTj4wKqANZORQ/wBPQiMCrHewV2vX3ySxgBB5CNde2/VgEUoWapBo/Qs94QtAhFWp4DejfWgcnjaqqs6t3VfbzkEuNjc2l43/AO15sgNioPtISPrEXMIDr79+36ZxINL+hCw1Jbrnj6PGKUtNfE5Ldf8AuTQXAPD00YlFJqoCLY5TcNvmaxxWqKAmwAD7k2bpkgYM6AYoYKCOm8cLnsqbSFC7gX43isS+240UEc8vgxCuiFm6V2WX/nWQVAbqihsroUUMN2laK6UdMMOhy4FLzhZqtLyJsTxHODkIg+jsTq30mWShTKQ8pwKDEbDnc3RoudWKgrgvLKmlogS0el+T9WFLVd/OsVt5K/XLDvnByVoHCq5UU4CJ9MdId5Wrg3R13ovIkZu4UHFlAVBU0o29+zIiqdjEHvbUZfrlRGc4jUthDNAbPGgVrExo0YaNTgK1xiaJuWSElUJv+S41a00gIIhJTjfA7yugTkIaW8mzRHpc44a2ie0Lo+H784ad1H3lC3zH1zfSvKc07jQ9foPKtkGLHqh1jbU5iNFeafPlkxW3cMHRWp9S/THZ4KSk7bqc637Og4pBvW8gj0abfVhEEWSoFKPMbfB7wFQ2HGi86HQiSLrHCGxkHQZNEVs4fMxwD4nWodw1IEtzofQCS9lzEHrIDwNgio9CBNNFyWaEHwx73vEIeOsNLBNm3ziCP4Y2h9i6ekmx9mN6SQ3HJet+fbjrTZEQ1yVYEVin6sjzyxRF7wsFuNJN4f2GBd7AhLtpZgVJlKnKB4hnv4wtB1hRcLhfHRPCTWaQScsQEThb9HjZQNBBCou0Yjzv1hbkBMniQm4yeHrK93Bxrwr4l6PFVFcBCShdbAYM24axQgikV47ixZXnZmsk9ASI1gUEm4PnBagBGMpodL15cGETqiqttH3K6JMFADUOR6FV95JVo8nw5/QAVoHGqb8LpxxpFCxp5UEDn6YAbRKoicVVsOt+NjigIuIA3ZdD28jpcFWgXeqL7LW3dO8mpCJEg2qI2Go13hCTZ2LuBOBtok2LjSSgPU9YJsTw/QSgiSKXCq3SJz71kHStSh8CdP2L846lFp2DopdLHDlnM4ytFrrBwPFwGHuGveQDYhUPCxk6EWcScZYZxnQD4xOfVfqzGbVT744nUcct6zTTWGDHkZhCjig36qw9To3rEuTPWagkec5ZREcRjR41Fq1u1iQsTgM8a6F398qrmu0E+5GcIvjnG1eJxWBXRAV4G+8kBbnxde1hChXoZVjjbdsBJEhsND2uK0NVA8neUrrTAmLR4rzq0fgJIsUGNzg9s8xc/XEtCVANNadmABomjv1Kkwbs2PD/AFwyJ4PDzgAAQ3qqbvQmb4mpgFsxRh1im078nFVdjz8bdWgmFKJCnLu/AngxinQWR3kgfR5OCQaCnig5EvAWC0SZGkNdUewC2Q93weGCCzyBrSDqN+GG4ggAbZXiPP0YGIAkDYpwCreBDIK8sOX2u8afhwzrV4wS/jisAnkRGsI7kUmIAsDffK4AUmKnpOsrW94i8gX5P1bRlmHtNYkSTfnI+TGP6cUCbmK9OOcBji5nHFFoGDkAhKwoD2gc2EdHg1yx+p/AhcWC+XmYcb4hLISo7u3Ro+lrKUe5YldokT+Srhw35oA1icIBORdypfSvaADykee+cB4JTBu7WXm+TGqBE9RBrsjzs10UIGRQROg2nkyAqenlv7GbE+Dnj6L/AFqgKsDlxEoZya0D4n8ZK2nOweeG4MUEKCAdkDzY/wD4IMsMhaLWB3eY91vHflUHMHKgS67DFgMywb22kB0r3q4x7kA6h6ir8XhwgzEPlNkRFq+h9LzBYgNwC8j04cYlyUUksnRJx58ODoQcp2LvgQb84nEGoYlxVwc7u89ZM2INGA0OTIl1iSdLlU0QL+rsdD/6fTNPyYEbvKnvWs1HOHe+MsfJkR1Mb/iwXzkXQ2gAjQBoVTowBOSZBkqcqb7cOJYsxgmoWPOr+x0YW2+bNagizvy6vCILHo2UyVQVPuKsW0AiGGXgI8uSXYjaJCs+FqjwV8YSGvVoOBCqI88K+MRIIqqIbtPJdfT1atoQozWlw1SnhAR6lGAWwFP6zVnbvnx41vErT7t9MECXmsbYUTamYZAmI7dpb7PP0O3EA9GyBXC1BLXbHnGQURSNRoE8lZ5TDNmtTQg8OgtfzdMTVsHcbQKpqHxjBQkUxu6ioFel+WyGn7UIImg3NPOIL1NoOtQbfjzgDAATShU9ouc/B0xGuWVf1YAawMvjDPh4wVR7zjPOcWNr/fv+r72hk+u/4x3OnC2e8FN5O8MzCbWBD5YxXDjKRAwQ2cTUNL4BzVB00Piw2m3nvLoQp0AoDDpZN+cU93vkTa5Pbj5odFbBt6nMXhHbsuTs6YEC7aUdpL+V8FBualgCVFodATDhllBUeAbG+64xq2bBrWQt8neljvHEVtpvAXh2TJ20Hr+0fzkZLyW9+ef8/wBXwlY13L3E4+4/jCPeq6UPPN1iM0DWFUh6N0b/APqhG6gpXFu8F2i+DLVGp9YdwwG7484OnVNwCbAPUckDRdsASHVJaGdGj61TugJmo2hfYPfGE5ym3woPsi6vx1j7gTHzIBdC8U5RDk7FgwNDP13gAQIDBj3ayZ8G8PVj1gBm8vnAAxyPlzY0CvxhBAHp5Of1cRLW/IP8YWsLH2xjMbMp62CMdQubGvvnFLrKkRzkM1MNOOByeBWNO9EGm+8IN2TYARZ5T2MJ78ScMw0A2ZIqa1OoHjRN8HOsZkwOlF5INGjkb7zuCUUwRfgCyqkmNNtQMRtsnBVl+jPDFwgiECwUjyTZvL2aoPaIlOUP908S7Kh7I11nFNzYE4/L8YHABs99/wBUepQ3fVflMSIVepf7mUC7QNbhIh51kJUBPabKyJyv0rvHaBUrY0KJ0dKDrIhloBHkR41LNCO7iq3JJthKQFDkHbtvkXmlK6RGBNm9czg3ZBhbkuqnf8ZxCE5Ap3CUuA8IMkjcHEVeEMHOgC0kqe0q46anDtdjCdiQHg1lbpDjBmeBuUTiLb3xkFr2Xv8A/f1nszg46TI4SB8bh915yHw3vDTWpk20jiAcLjpqNso7Icgmk8qJ7wTmbwQweABKOcMvp6i7sRXXDiMXDLURNi6Xy3vB9bZH3TEGORN5XNsV6rRtPTsMjp1m7dAFNoOG6i8RZetmRAgE8iQXkuI9HS9G7aiaAU1eY7yCkUNTgHucs2oaSn+/wYXDAAPT/Umqxj9eKu3+vf8A7jGCmqDBtdrowRJ1AmgcPEE2/XxgNUJU1LqKS9+CdYwLDsvIXAxQg8VmtYscsCtlbRl2PsWRsdoIHpIsRq/XllERUxiUWD4esJFroLA0JA4/DlSIDdpqGh1jZKe4gDiDiH5w1xSHrDi3XNHwYJpuZIa4MCh+TB4DnHCVvFGbDD0Zn6yDDC/bFmSbY630ZYrAhpuYx/4zWm8JOTnGgpHEJA6OPRWGaDRiPC0/GJlIlICDZ0u94dEpWQwDu4eV/szQCCsXaQTrtz9qw5POkgQCjjs+44N4R2FW7vaWuz3jGFINhRWqAJubeOsQahGpYBpoeVXnDgk5VOTCU6TXr4wU7RUu1sgvwxxZhb4wa9Z939RuAnE8veKHyox/HP8A7lsOw29Ycqbd40ZHJHKDmkK0F+hgl2DaXkOyh66+1IRjwciUEAV1s3szRohJQF37Kr9DAcGwwQzECvy+mJIrsXuwSbAJX+7KMGexc3I15B1j0mEukSpSUaTADKw8Dle1duO2w6Ze6dTBYkIYEBJgK3BF7ZA7N5ECtcVnUifGGVBA9Gv1kgahfXJlIJJhgWRxPKJgI7XnDLexrBTjeMZhWHBcViAP5wZSA9xOsYhUPKFNDdrhhBTEbRkL21iCzSQ6ii042b+coOZ6o4NNiQrv6yB42YU2EraGkO8BKALAm+CgWtCT4OgUltLvOmt4dL7xEVoSbuyXe3LB3w4QkFAbW0T3OvrkIpqXwz1D8GAqPQ3z1/Tyjlr5ZtHR5fj/AHvEWYtu+SVB2oZxxI9JzEjAL78ec3qBYlGA1BG7aswypvU6YQNCYHI94baJEfVITZbqDduzJB1KpJhQxvk+c4mB0vVaeQLpHNiWRp7VDWiJxhgzwm4JC6adOWPicATXS7Evg94ZmHRh9VrlAwaw9Lgs1gx5AwfbTvrNsCY4irmvVuDEpT9bMr4JzUMBcvmGU8sL+6YoNp4wkDd6y09seAkbkAkNn2zi3hKFUKb28dOQHkNM73iLXAIpjYhWwJwWSZRarXskOINazDcbjOlW8uQuARms3AOL8S+g1zkU1NJAYNqzr6IhAjQLUvfw3ffrQ0psS8hAiUfDb5wPohcLUsOOOes6HyHXr/Zk5W6F59/0wMOgP7/XLDyO3ax2658dOaP04mopw+XjLcm3Ed4UGnG3m4uuGqVd6HFK0RB52xo4w5hIW2ut1+5D0zJIXZnZdr6jXJ68UYD7BxkD0bKg7d4OjK5AybQog2IJ3aabiYUPFE08GevGE7AA1ANGagDpjIeDnA5xhj+ccnT6ZInET5Mgza6zYhhdYXIC089/rYZiIF89Y20UzXWWBkc1LpjoYmI5cT/jBPwx/YMASGzHvEK3abMLwaxqUNBZpvvJDiLDmWGuNdY6eFIAlaBspX5wnHoya/AbBdFwawTgGO0iisH2FEXGBjRdCrfA8JOzSeCFQlU2EWtYDG0VTGbYjvafLWP0cBbwFBioGUubQXjZ7Ml/DvzhUIofDznOzY/0hsDNYHM7cFhZzPkv/uKQPod6Ozn4waaVaTY2cM1pYYlgegIbeg1oAcYxQAImGPaABXi63ulHWbGsA+QcPHI56nOwWKR27eJ52HDqKLEFzdho/wCRLSBOVioWDNaYL0sEQhCKXqax8iwRgFIh1W/tgHTdDEIWveEp4B6wyBrFoQTFdyjcVcpljVC3AKFAUd/rtmqhJ3m7QFipIyE9sMl64wubjfnLlNO/9uCRzHeAglc4fhjHEKR8NrbR3OcVzKaRKbpMeOsdvYbqnKSCjOpjE45PPWK860H+AliBtBu3WQvC/TWVxWjGmHa1/wCC61m6oAKAhXsfGXywzchrqb5Fm4cZKEkihIDhpfM/hhCG5HrkdN1V4OsDZrzuHP284A9gF8nX9IUmqSkYbyy1riPG5L64++MfRs79HkUOitzjbWRPuTr3pcEEgxMXckFDz7HhwgZcASxwAQnZ+tLACGR2wWh3t+87LbZ7tdBuf5AUCjuZScdzIQojSK4vLnrAtEMixagvPGsAeohrrHeqwqMkPRMcR13hjbjKC9ZCsQBtcaVKjDrAAZ57/XQqETbp6xqIU9ZYGRyv5nDwiBwXNj+cKwqygPxw3rsYdZgPmYiBSeYQib8MTkgTBQhryRHH9jk8zagx88f2GW1+GuhO5ALT7AhkR0c1F3pxR/FXBbqTNgenUXX0NYtdELaFpClFUfOAoh6VYApUqbJtbyRkGV4btQoiex8GOgEanJ1u++D5esqS1GS6Tj+RwRBOHj+iCVnZ4LhXU4nJKt+gj9MQPXQ/SF41u8dYddolCQkJYaID8mRGgqFNMUatNoN84UKSYalqNBZ3IPjNkGyNEGyXcXf3LRkESdIdi1A2H3eQxbAaoApdH5wkhkfAmKmzB1GBUJOINcrmyCaPHMeubl3wcesUkWuGpGs1hwHGRPD1hYn0frEIec3oRGRIICjv9ftuUIO8QaAWKxwyUf8AADuvzkNqrhc9p4xhIjnhj45sH0WLqinxcRUKwBURycue/WB2kLHbGa6WdmYDFRDUXlIwRxcmgh/eleRKd4g2MqjTQcJFf2L1N5f2YFnDdE1ZhFEArvwdBEg6iusc5ZLcDsiqV5E9ZLOBpES3Y9bfZ85x2FOUIGz6EPlyj/5f/j/QqBXQFXN4wubwPH3HBBOmtxsjzwqPpw2RHNhZtBRAhH16wwWtRPIi5JZ+Th+nEjRN5FYdjVxiozCGO8Ths4fc+ugGyg4PTNwxD2W8HRdhOHeUItTtegOmoBuGc6NtkdEuyaeMMZcchVVDz7w8QxDTZjhcF3wm8ECBqYzQZi0LJ7z4wz5reDxWsUFKOsOoABnnv9fFIUBfPWM4ynrLi1NLnzmXp8Mr5GTq4bux6wD2m8ZJMEAiUO9zEmTiJHHTrDwNGM6zpdHOq9PGNKeoS0iKw2kxWCWy+o6CKW3/ACocbz4ZphzCvDo3uhqrEZUSB6GuzLCkDSA0SGq0OfIMN7uU7nkqoka5DnCIQiZMlJaj0t+WasRQ9psvHd9U4xmCAAjzHz87cAEoUf6DfHchz6+7i6AKW8d8tcm3uYqAG2EWJeNoaSOzjvEg0AqhbZQAPrTm9xHaApe007PywWAWz4Jxiy82+XjF0XWBbFxhRb/wWDgFukxsZrt9qV4t4VuG/qYbs6hqPsUWnt1iQeEJTUVfL5h5ybWsmxbC5tQ8A4hJs7xokgZorsyZ38YEPszRviGVecdrCMluAGnfn9g1tUIO8L0lYiDxmrC0+yZAb2YMObecQSlN4x6RxJS0TD5hVG0OD8mGdowXAOwbI78YurbQPAuRYczLhaqNqajqkmt4KQLZTbnXdB1MYHBhpYFaoa4OGaLGLiEUIFk2eVNhZIQQJOAB8jGS4DaFCangcX84yUsy34BKOgKLA6zaKQ1T2WCThwdPMHqxT6Wf94agCv0xKx3QOQNA9wfDGhp2CBFd+CfJr1ihwmRO1RdfAZDrFAFykCXb9+jObMIOKBGDs4tv1k6IZZTQMQMPZjYeP7Aga0aMrlKiHu505K3R61gPnUPWx6YWD+2I9UrynGPl7xbzs3zgvtkcUcGusovsZyvjhEJDBG3POCF4RkyZ4bxmjuxma4MLah4wSgEa7e39ghJVHxi75FTWUiJGacFerIBbxg6lahgMnJ3lI+eCtWEAaYd8mC9oJSlOjz3m0jMMCO3au4caxCNHJ4EJDmAG97yparGkHihdLHsceKiWWNq+HNSJw3KptJQEMVUo74cbzCYdroagM8qHpjmEkLR5TQq1HOhyZRUAFTrwfBjxdAHJkNehoVr56CIhOahtPZtwAJR4f+45Iv1E39xcKIJIHg0KG3iPGOBfbUmxuD067TEedC9FyBYd+NvbCoG4a62qCvCnep3liFqWC6nsuVbyIZDQAA3NVNVOciYHdqlCbjrcQpSJk2ECoyR/vt4NDPAwtiwDTGk0qFytndXnZg86U5A8F9GVnlgDjDs3FHwyLcE5yS3x98kP4Y7s8YlSq4rmkOarKUfd/YY0Ej3OsX4U5JTJnTdZr6O/nAJu/XBBPq4DbOOAhVyM1Q7wYiPbKHGsRsnOQiuyLSJyGacS3JJdM0xj1XxlnT12O/LGJr1XQ0cA1AQx2NKBNq4AD5Ptm9AucFG63U25ZIsx5mm10INeTjABLG1E7AnnV68SqZ9osexkneE+/GaSg+S+Ztvw9ZWaRTwdF89/9tBdFmI1sUHqToeurJLaKTQ0l12XP8OdoBrAo7dTbvzkuqhgSwQTfTs1zhIAJCzyniib8/WQsSM3JmmUxOcfcV4kH1qwr3M4JJTEBK6AsOeMvIffblwgqCe8CIiatBtTdBXY5WjcjFNHm8XI9AuBIZdbeDPGDcIBDWjDFOufGTIbHG8/vjhBGzh3bYfk2KTrCghA+P2Gc1JB854Q2EOsAZHBlQfdmyXjneCPB3ecirswAnszkwyH6eTGIG49jLlB0ojmSbmz3mwAiik5lYE6294IsoRAICuOUtbk9UQ0CBQDpR04MZ1RHhVEoCxe+sHtBMCY0NfaTDUU9B4qbvk+c6yx65gV7PU3XF90TBoCGRnSesdDC2ppXlXf/wCLCEDAlPmngeMEAOBT6/8AZIPO6cM6j5HBFHgrRnXZOuGFIhpEPAKGnk5zdYAGxFgehNv/AEliIYJSkEFT62nBkKIg3GUQUG3p2xHdnRnXcWio8ZoyDLSN1CiFp3gtxRVOzoaQrq44sFxyBV6Kzlp1muNz5bhCJyG/eDVOynJhuWgGIhoouCUiGRs0GF+BvKaP0Xxn+AxHPJx2AjrFRKGnB3+xXGUOuTEKAVcSlkZnMPDP/UykeTNORz8mvjGUVRMRwargqo0T1hYoK5Ao5zzugwzkxjvW8Dvepozmx1yfqYxIK1wUm7JpCZBhZhZcNUrS6mGhnqSGpHkJmmVxu50p5WhVXpDTg0DAs0LjoYqbbr1mrGglCOmxsTvtbeWUzQKewYsuBLiBFUhYgb218Rm6JyG1Z7f+sESAq5a2TkEb1qH4xxWIUtQSvVzIjlASEvYytK9c46C0gIggByEAN7+iS2DoQatdFwvl3ndwdALjRnTc5xANCpsbjY2gETDB0iA2tZQBM84FAwDkKDd1CzzllOzBS7VOS8ecshgWq7bfGAChA9awYtsC3IneALom8MJT/wAyI4ecZey7z8hgEOhgQgCDDLhAej9ioBRQRPTliJqzDiQL+cXS5wL9s1Q/O8m3T1vKm9YL9t3GworWFwpB95oAuZwcOpzxl4L1KGOClGzstc0RVT2IeYCkO8sTUOryxCgxPrghsyHEiGLkHe8AwREw4AQiAUyF5GpA9pXs7NYRPSDjUHBpRNohvnzBXQ0aksTff5MjFSAS7IVyCa+DEF4MFd/Sv4wRBNjw/wDVqbHvZ+dfzjhESo16crUeHjLXEXkKgw7JdYNw4BqCECh5TlpztgUYVFK6ml5fV9GbIynCKY0ndycuO1DtjSChGrXdwhlCB48Y7EI5mzBCqFFGHSN3aOpxjhC7Bo5EhBxp6yfERkTogsn9sidWWlRVzY5HD2DYma2IYEB+rEDk+ufmMlf2ZM9q8ZsBkmsNMI+h+x7HAc7W4rrEySv+Mty8OBKb5ztJ/fD29nAYuJ+gwFC9fYzr64h+IQq9A8k39MEXkJoVuKdnCXnIlDSNFN7bgCfOIdSiDHRHSFU7zeALyKboKijcHGC2kQjwUFuM4kI384bQLrTV4Q3eyUDyrVIXNmID0hWXCw2Dg+neVpcxTiDv5aTIA/V8PH/U6QpwbmuNYKcyKawK/ACZLrgjZFKZia0ejeMOm1UFhUCKD0KwQDFgkp43XB1hUQpaCULyQrqYfDtEZUWRBLjxjrzR0drSgu7peMEN1NxzYNOKdtY6SS22UhUoDsA3vEvqtDTuo+cLUAkMctqsIyOSNy6wxXnIjvPOeN5aOneFpBGSqkWvxnGjj9kC3RLDhzbEF/OKbcMj9rLGVfuOVL5w36UOcRJFZqaDpMavoQDld/TA3WwkXEJtNsfOKINat7geUXXRg3HLMSCWdDk4PIEeJ0ECRe9yMhxYC0VGoo6uEKcC0vKtJs8XJTsSkNimSoEqFd7eIwUQXD0O0ISTgzQCZE7ITt2EHvJbr0OC8T6n/TQn+U5/GC1CunZT8K5pgG9tLV/zBv4SyAXgDNFzHDfXlocVns1u3QDclehjRXLIKt5Ed0Y0hgGyiCbDBHZnl23IN0FLtIm5hiCyYza04bom8J0Q0en6dGYds7kDYK6Cah9MGgERrrES0ucHhmvJkoGJ/EwExqfLX/EHk2TWW/KOsK4g08/+fskYyIV05Jarpm0dJnOus9p1jRgB/wDjHV9NeciDTXLgQuC0FyPswkoEwQLpXTGfTAbdETpJwjXWvrgNEnxSx2roqmuDJ3Y20NbSBWl8YdhCwAkfJ06XWseqGmBNVUgLbvjGeUPA8nASBxZ7x2ihddkQqIQP3ZcookKxveAj6w3FypShh6j7wDOpfnv/AKAo8lnny+gYCVL6NglHtJHcygl3W12DwJ2U4GMVYrRNEA0gX6RrBEnUc0N50cLpvEWEynRsmrxWYRCgM23YCAAp5x03WVate5QhvvE0zsxqG9khB++GnkNYpb04eT6MMc4JJDo/vipqeDHF2uH7pQwyrv7ZNrhjg4oYIoHeIFgOsI+AKO/2WENY05941QF1jEmTnJdEyo+7KnOAi24CPMxzb9YJprAR6WdzkfnGaBTtbLV9UfWILzTZcEmiMoM5XOOO00Ttv7FfGAOAdjW3U2UQE6waxaGmkJsHbvoyA+lohosymcTnxlkqieoDpD3Eo30ZtSXVwCSTFyO/BccgSjq+h70afY+MfW5g+v8A6/6Hii1EFHgvrWcMKBbRuQ2FY7LyYGiqk2xUSkbU7kmGx+yrpia3yQXXeUO1JgLOREAQ/OCriCACbpkVE7zQ0KU4kEvReTeVFglgRwznAFE5HIg7a4CwSkK29Jj7s/SfB2HGzzkuxCHrFpN3xgiDAh0aMg05E40dGc4cI/Q4xvByhkZhD/P7LhsSjw4UsCmORw7kCPGSDGkcUDeTS9Zyg6c03aYqxqO8dijEcPyjfV2v0cdE0070butl2nbNMi5yt9cJ0OnQ47NJ8YNKSKEvBtza1qohcldaGnRPOKTIA2A2wpEK1+MIaTW/IggDEOb3kzIYinZXQoBpp4whOGl1hqeQNPgvOOt9v9Nf9C7gTVFuxx5eP8GcIgE+5thRRHVfHJ3cepkyLCvjl2swWwSwTuiwgjBc3DVD64ggVNUxMUA4gw+oEWOuN4BWjzgMR3mXRH4YaCHsva20yO3pcUhthUuyqvt1Jhq6K+a4jDpcmHZduEUZmsbvvJcus595pweZquPxATWaDCrrg/Zol0Fe5xjjdhrGbRUclMLreUOectcch7xlnFxyFm8um+SHrDyID0T3fX2d44W3ilAbcAgDtnzh2K1gYWo5o91K+Msi7xAvieJs630yIhlLRcBJSPH/AJiuVgIkkq1XjCN886l2EhoSyqsdIYxzoQTzF53i+jmQ42qPTyXe93f/AEEQaR2BpHZA7rzjQgqnIRIOQ8Nm9kiCuignYM7saPnFYAU7rHtQdlxr+28rpDuCLdwNHvzjMWRGUJqE2zRTjjBqABpMZmwIlUvLBPOQtsoQQCu+NcY2J7RyHCuCFoCBjzHLkq7c0F64ybmZNY5q/TPrGIdQZEGQlOXowAACBwfs43aKQ4fP1y+IFkILsxDvKhXBHOVFv1yBvPWdg51gsueTKA9Q+ovnGciwW0ab4N613HnCF1+eOK0RGz+5mkyhNkUGA7ik8m8AJSCUXsidE9PWsUFXQ2XsA2AeAY94s68iUNEFqAVSu9nGG4niBfDyKNOP+kzhywPlph7wQKMVa9jRLwQ69YSIoTwY0NWF8A5whJRqQ2GCl0MZjtIiAJvS1g5cD0xldAG0JQisk4fjgqjxBzRhDrY6DjXHDGBgq3fLdr39sATOaxtrVxkeTHJ4yYbyHKGVHf0zQ1zeNqaxdCJswywAjvs/s8n6CvDm0SBGkcSJoZYN5xNzhz9MBJZ3c+AaXyHdtXi4DuSfW8kVAbilM4INIgS3sw1OR2NXwM2NQtM4wjEBGNopAd3l/Ak2ECb04VHQ0W9ucDWBJBwNFBJOLiEEsWg1xXNwWpsXa7X/AKgxosVfIHVccRCQEcpp3y/2+4qACCa4RYi0d9j5RhuC91M4LHeuTrGCrOJekgoXPn7ZBqw4gHcIhd7NuVM32hcrjKTlxTvF72PgCodABVcOsR0AUBpE2JghzMZHeSHeJA85YhhNXDoAIJtP8/tFuKy3UcfDlRExPeaeUZgJzjJzkNhUmnFj7xpTbOxR9oj69DD3mD30M4VpPOSYxmPExUHp9AwPyIxjWj89t5B3AngwDNMGmxNFhnr8ZKA8JPgMBeCWaNPF5mAw8IQ/7Iz7cXU35xoEEgRnjvv3mlKkKHCOj06xSOJ6gCaWDIRLEnAcVING4VaXUNyY3s5Q4YQW/QTZ1qB7PeAw24gY18AxvOD5zSx+mLLIcGH6IIMwAAIHB+0kACQNgfyZCgr1xvHVxMrt1kDti5hxPf8ADEL6ySn2eRMo9DhBqeKfB8sT+BilhxMomIfSkfsv6Xzcl+Ql9XOtGxSZNwiRCLQJHVS/bvAIbp9h8VMJy18YY84Le+cec4nr0M3M8hoPHzg/wC+D9qGdhAc+j+cS6okxZQTHNQC9Jkw8i5Q5PacnkxlgyAvGLSmWVjqD7ZUioJuaTcIGrNTLsIBClpvnauvR/SmWOrKI6RMogttORVr1mhBqKLQUBXtZ5yCBShVHN4ikpuY0TeXeM1AcHaRdYulQJ7CuHTK077l/aqARKOkcQwBC5fJiUnTjxjYXr1lYGXTHT8nWFuXjOTl+H8YtDb1rKAqITkdGBsIDwAQD+mSlFew5rF1IREzVX31nMJ9MWi76M3WReJl1NEGg+cIaJM2zt/bBuc4mn5wgfIDTKIs7vApX/oWGiQ2i7+ejAyhgoH9QROGg39cUC3I/4YpFfNYFDr6YoQaKNrDUqAHM8/ttZVVeVGAIAHRr+sTr3lDg8I+BP/4gv//Z"
      },
      "type": "imageNode",
      "width": 380,
      "height": 356,
      "dragging": false,
      "position": {
        "x": 269.0314135801813,
        "y": 250.5987037507211
      },
      "selected": false,
      "positionAbsolute": {
        "x": 269.0314135801813,
        "y": 250.5987037507211
      }
    },
    {
      "id": "cropImageNode-1768671887867",
      "data": {
        "x": 10,
        "y": 10,
        "label": "New cropImageNode",
        "width": 90,
        "height": 90,
        "outputImage": "https://pub-e8fef8c0e03b44acb340577811800829.r2.dev/0ba4cad8511443669d51478f28e5a447/cdc46e43c8ef4b198e45b578a049a155/672cb86185264418babdefac9f4bc844.png"
      },
      "type": "cropImageNode",
      "width": 200,
      "height": 244,
      "dragging": false,
      "position": {
        "x": 821.7326703748438,
        "y": 187.8637430931717
      },
      "selected": false,
      "positionAbsolute": {
        "x": 821.7326703748438,
        "y": 187.8637430931717
      }
    },
    {
      "id": "extractFrameNode-1768671891604",
      "data": {
        "label": "New extractFrameNode",
        "timestamp": "13",
        "outputImage": "https://pub-e8fef8c0e03b44acb340577811800829.r2.dev/0ba4cad8511443669d51478f28e5a447/3e4a319643e94f7b827e35fad4c3321a/8a87403eb1c54201b1474ff0ff424cc0.png"
      },
      "type": "extractFrameNode",
      "width": 200,
      "height": 244,
      "dragging": false,
      "position": {
        "x": 996.4677236644677,
        "y": 665.0782830450719
      },
      "selected": false,
      "positionAbsolute": {
        "x": 996.4677236644677,
        "y": 665.0782830450719
      }
    },
    {
      "id": "textNode-1768671944749",
      "data": {
        "label": "You are a social media manager. Create a tweet-length marketing post based on the product image and video frame."
      },
      "type": "textNode",
      "width": 320,
      "height": 200,
      "dragging": false,
      "position": {
        "x": 1272.563836891467,
        "y": -264.5571677722883
      },
      "selected": false,
      "positionAbsolute": {
        "x": 1272.563836891467,
        "y": -264.5571677722883
      }
    },
    {
      "id": "llmNode-1768671949586",
      "data": {
        "label": "New llmNode",
        "imageInputCount": 2,
        "output": "Escape into pure sound! ðŸš€ Our premium wireless headphones offer active noise cancellation & an incredible 30-hour battery for uninterrupted bliss. Sleek, foldable, and perfect for every adventure. Get yours! #WirelessHeadphones #ANC #MusicLife"
      },
      "type": "llmNode",
      "width": 380,
      "height": 347,
      "dragging": false,
      "position": {
        "x": 1752.060451978936,
        "y": 385.6077340412297
      },
      "selected": true,
      "positionAbsolute": {
        "x": 1752.060451978936,
        "y": 385.6077340412297
      }
    }
  ],
  edges: [
    {
      "style": {
        "stroke": "#ec4899",
        "strokeWidth": 2
      },
      "animated": true,
      "id": "reactflow__edge-textNode-1768671841229-node-2user",
      "type": "default",
      "source": "textNode-1768671841229",
      "target": "node-2",
      "sourceHandle": null,
      "targetHandle": "user"
    },
    {
      "style": {
        "stroke": "#4ade80",
        "strokeWidth": 2
      },
      "animated": true,
      "id": "reactflow__edge-textNode-1768671840452-node-2system",
      "type": "default",
      "source": "textNode-1768671840452",
      "target": "node-2",
      "sourceHandle": null,
      "targetHandle": "system"
    },
    {
      "style": {
        "stroke": "#3b82f6",
        "strokeWidth": 2
      },
      "animated": true,
      "id": "reactflow__edge-videoNode-1768671867467video-input-extractFrameNode-1768671891604video-input",
      "type": "default",
      "source": "videoNode-1768671867467",
      "target": "extractFrameNode-1768671891604",
      "sourceHandle": "video-input",
      "targetHandle": "video-input"
    },
    {
      "style": {
        "stroke": "#4ade80",
        "strokeWidth": 2
      },
      "animated": true,
      "id": "reactflow__edge-textNode-1768671944749-llmNode-1768671949586system",
      "type": "default",
      "source": "textNode-1768671944749",
      "target": "llmNode-1768671949586",
      "sourceHandle": null,
      "targetHandle": "system"
    },
    {
      "style": {
        "stroke": "#ec4899",
        "strokeWidth": 2
      },
      "animated": true,
      "id": "reactflow__edge-node-2-llmNode-1768671949586user",
      "type": "default",
      "source": "node-2",
      "target": "llmNode-1768671949586",
      "sourceHandle": null,
      "targetHandle": "user"
    },
    {
      "style": {
        "stroke": "#a855f7",
        "strokeWidth": 2
      },
      "animated": true,
      "id": "reactflow__edge-imageNode-1768671873896-cropImageNode-1768671887867input",
      "type": "default",
      "source": "imageNode-1768671873896",
      "target": "cropImageNode-1768671887867",
      "sourceHandle": null,
      "targetHandle": "input"
    },
    {
      "style": {
        "stroke": "#a855f7",
        "strokeWidth": 2
      },
      "animated": true,
      "id": "reactflow__edge-cropImageNode-1768671887867-llmNode-1768671949586images-0",
      "type": "default",
      "source": "cropImageNode-1768671887867",
      "target": "llmNode-1768671949586",
      "sourceHandle": null,
      "targetHandle": "images-0"
    },
    {
      "style": {
        "stroke": "#a855f7",
        "strokeWidth": 2
      },
      "animated": true,
      "id": "reactflow__edge-extractFrameNode-1768671891604-llmNode-1768671949586images-1",
      "type": "default",
      "source": "extractFrameNode-1768671891604",
      "target": "llmNode-1768671949586",
      "sourceHandle": null,
      "targetHandle": "images-1"
    },
    {
      "style": {
        "stroke": "#a855f7",
        "strokeWidth": 2
      },
      "animated": true,
      "id": "reactflow__edge-cropImageNode-1768671887867-node-2images-0",
      "type": "default",
      "source": "cropImageNode-1768671887867",
      "target": "node-2",
      "sourceHandle": null,
      "targetHandle": "images-0"
    }
  ],
};

export const workflowRouter = router({

  run: protectedProcedure
    .input(
      z.object({
        nodes: z.array(z.any()),
        edges: z.array(z.any()),
        workflowId: z.string(), // âœ… Required to link the run
        scope: z.enum(["FULL", "PARTIAL", "SINGLE"]).optional().default("FULL"),
      })
    )
    .mutation(async ({ input }) => { // âŒ Removed 'ctx' since we use imported 'prisma'
      console.log("ðŸš€ Initializing Workflow Run...");

      // 1ï¸âƒ£ Create the Database Record FIRST
      const runRecord = await prisma.workflowRun.create({ // âœ… Use imported 'prisma'
        data: {
          workflowId: input.workflowId,
          status: "PENDING",
          scope: input.scope,
        },
      });

      console.log(`âœ… Created DB Record: ${runRecord.id}`);

      // 2ï¸âƒ£ Trigger the Worker and PASS THE DB ID
      const handle = await workflowTask.trigger({
        nodes: input.nodes,
        edges: input.edges,
        runId: runRecord.id, // ðŸ‘ˆ This links the worker logs to the DB
      });

      return { runId: runRecord.id, triggerId: handle.id };
    }),

  // 1. GET ALL (With Lazy Seeding)
  getAll: protectedProcedure.query(async ({ ctx }) => {
    const workflows = await prisma.workflow.findMany({
      where: { userId: ctx.userId },
      orderBy: { updatedAt: "desc" },
    });

    if (workflows.length === 0) {
      const newWorkflow = await prisma.workflow.create({
        data: {
          userId: ctx.userId,
          name: DEFAULT_WORKFLOW.name,
          nodes: DEFAULT_WORKFLOW.nodes,
          edges: DEFAULT_WORKFLOW.edges,
        }
      });
      return [newWorkflow];
    }
    return workflows;
  }),

  // 2. GET ONE
  getOne: protectedProcedure
    .input(z.object({ id: z.string() }))
    .query(async ({ ctx, input }) => {
      const workflow = await prisma.workflow.findFirst({
        where: { id: input.id, userId: ctx.userId },
      });

      if (!workflow) throw new TRPCError({ code: 'NOT_FOUND' });
      return workflow;
    }),

  // 3. SAVE
  save: protectedProcedure
    .input(
      z.object({
        id: z.string().optional(),
        name: z.string(),
        nodes: z.array(z.any()),
        edges: z.array(z.any()),
      })
    )
    .mutation(async ({ ctx, input }) => {
      if (input.id) {
        const existing = await prisma.workflow.findFirst({
          where: { id: input.id, userId: ctx.userId }
        });
        if (!existing) throw new TRPCError({ code: 'FORBIDDEN' });

        return await prisma.workflow.update({
          where: { id: input.id },
          data: {
            name: input.name,
            nodes: input.nodes,
            edges: input.edges,
            updatedAt: new Date(),
          },
        });
      } else {
        return await prisma.workflow.create({
          data: {
            userId: ctx.userId,
            name: input.name,
            nodes: input.nodes ?? [],
            edges: input.edges ?? [],
          },
        });
      }
    }),

  // 4. DELETE
  delete: protectedProcedure
    .input(z.object({ id: z.string() }))
    .mutation(async ({ ctx, input }) => {
      const existing = await prisma.workflow.findFirst({
        where: { id: input.id, userId: ctx.userId }
      });
      if (!existing) throw new TRPCError({ code: 'FORBIDDEN' });

      return await prisma.workflow.delete({
        where: { id: input.id },
      });
    }),
});